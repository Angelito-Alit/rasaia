version: '3.1'

stories:

- story: greeting and student inquiry
  steps:
  - intent: greet
  - action: utter_greet
  - intent: ask_student_by_name_or_id
  - action: action_get_student_by_name_or_id

- story: teacher information request
  steps:
  - intent: ask_teacher_by_name_or_id
  - action: action_get_teacher_by_name_or_id

- story: student grades inquiry
  steps:
  - intent: ask_student_grades
  - action: action_get_student_grades

- story: group information request
  steps:
  - intent: ask_group_info
  - action: action_get_group_info

- story: academic performance consultation
  steps:
  - intent: greet
  - action: utter_greet
  - intent: ask_low_grade_students
  - action: action_get_low_grade_students

- story: high achievers inquiry
  steps:
  - intent: ask_top_students
  - action: action_get_top_students

- story: risk management consultation
  steps:
  - intent: ask_high_risk_students
  - action: action_get_high_risk_students
  - intent: ask_vulnerable_students
  - action: action_get_vulnerable_students

- story: administrative queries
  steps:
  - intent: ask_students_by_career
  - action: action_get_students_by_career
  - intent: ask_teachers_by_career
  - action: action_get_teachers_by_career

- story: group management
  steps:
  - intent: ask_all_groups
  - action: action_get_all_groups
  - intent: ask_groups_without_tutor
  - action: action_get_groups_without_tutor

- story: tutor inquiries
  steps:
  - intent: ask_teacher_tutors
  - action: action_get_teacher_tutors
  - intent: ask_group_tutor
  - action: action_get_group_tutor

- story: academic workload analysis
  steps:
  - intent: ask_teachers_load
  - action: action_get_teachers_load
  - intent: ask_classroom_usage
  - action: action_get_classroom_usage

- story: general statistics request
  steps:
  - intent: ask_general_stats
  - action: action_get_general_stats

- story: news and forum activity
  steps:
  - intent: ask_news_views
  - action: action_get_news_views
  - intent: ask_forum_categories
  - action: action_get_forum_categories

- story: student status inquiries
  steps:
  - intent: ask_inactive_students
  - action: action_get_inactive_students
  - intent: ask_students_without_group
  - action: action_get_students_without_group

- story: academic evaluation types
  steps:
  - intent: ask_students_extraordinary
  - action: action_get_students_extraordinary
  - intent: ask_students_remedial
  - action: action_get_students_remedial
  - intent: ask_students_ordinary
  - action: action_get_students_ordinary

- story: critical cases
  steps:
  - intent: ask_students_last_chance
  - action: action_get_students_last_chance

- story: goodbye interaction
  steps:
  - intent: goodbye
  - action: utter_goodbye

- story: graduated students inquiry
  steps:
  - intent: ask_graduated_students
  - action: action_get_graduated_students

- story: temporary dropout inquiry
  steps:
  - intent: ask_temporary_dropout_students
  - action: action_get_temporary_dropout_students

- story: definitive dropout inquiry
  steps:
  - intent: ask_definitive_dropout_students
  - action: action_get_definitive_dropout_students

- story: active students only inquiry
  steps:
  - intent: ask_active_students_only
  - action: action_get_active_students_only

- story: specific career students inquiry
  steps:
  - intent: ask_students_by_specific_career
  - action: action_get_students_by_specific_career

- story: critical risk students inquiry
  steps:
  - intent: ask_critical_risk_students
  - action: action_get_critical_risk_students

- story: high risk only students inquiry
  steps:
  - intent: ask_high_risk_students_only
  - action: action_get_high_risk_students_only

- story: medium risk students inquiry
  steps:
  - intent: ask_medium_risk_students
  - action: action_get_medium_risk_students

- story: failing students only inquiry
  steps:
  - intent: ask_failing_students_only
  - action: action_get_failing_students_only

- story: low grade students specific inquiry
  steps:
  - intent: ask_low_grade_students_specific
  - action: action_get_low_grade_students_specific

- story: socioeconomic vulnerable students inquiry
  steps:
  - intent: ask_socioeconomic_vulnerable_students
  - action: action_get_socioeconomic_vulnerable_students

- story: academic vulnerable students inquiry
  steps:
  - intent: ask_academic_vulnerable_students
  - action: action_get_academic_vulnerable_students

- story: excellent students inquiry
  steps:
  - intent: ask_excellent_students
  - action: action_get_excellent_students

- story: good students inquiry
  steps:
  - intent: ask_good_students
  - action: action_get_good_students

- story: economic vulnerable students inquiry
  steps:
  - intent: ask_economic_vulnerable_students
  - action: action_get_economic_vulnerable_students

- story: family vulnerable students inquiry
  steps:
  - intent: ask_family_vulnerable_students
  - action: action_get_family_vulnerable_students

- story: consulta indice reprobacion carrera
  steps:
  - intent: indice_reprobacion_carrera
  - action: action_get_indice_reprobacion_carrera

- story: consulta indice reprobacion grupo
  steps:
  - intent: indice_reprobacion_grupo
  - action: action_get_indice_reprobacion_grupo

- story: consulta indice reprobacion alumno
  steps:
  - intent: indice_reprobacion_alumno
  - action: action_get_indice_reprobacion_alumno

- story: consulta indice reprobacion asignatura
  steps:
  - intent: indice_reprobacion_asignatura
  - action: action_get_indice_reprobacion_asignatura

- story: consulta indice reprobacion general
  steps:
  - intent: indice_reprobacion_general
  - action: action_get_indice_reprobacion_general

- story: consulta datos estudiante especifico
  steps:
  - intent: datos_estudiante_especifico
    entities:
    - nombre_estudiante: "María López"
  - action: action_get_datos_estudiante

- story: consulta calificaciones estudiante
  steps:
  - intent: calificaciones_estudiante
    entities:
    - nombre_estudiante: "Miguel García"
  - action: action_get_calificaciones_estudiante

- story: consulta estudiantes bajo rendimiento
  steps:
  - intent: estudiantes_calificaciones_bajas
  - action: action_get_estudiantes_bajo_rendimiento

- story: consulta estudiantes promedio bajo
  steps:
  - intent: estudiantes_promedio_bajo
    entities:
    - numero: 7
  - action: action_get_estudiantes_bajo_rendimiento

- story: consulta estudiantes alto rendimiento
  steps:
  - intent: estudiantes_mejores_calificaciones
  - action: action_get_estudiantes_alto_rendimiento

- story: consulta mejores promedios carrera
  steps:
  - intent: mejores_promedios_carrera
  - action: action_get_mejores_promedios_carrera

- story: consulta lista grupos
  steps:
  - intent: lista_grupos
  - action: action_get_lista_grupos

- story: consulta materias complejas
  steps:
  - intent: indice_reprobacion_asignatura
  - action: action_get_materias_complejas

- story: consulta estudiantes con mas reprobaciones
  steps:
  - intent: indice_reprobacion_alumno
  - action: action_get_estudiantes_con_mas_reprobaciones

- story: consulta comparativa carreras
  steps:
  - intent: indice_reprobacion_carrera
  - action: action_get_comparativa_carreras

- story: consulta top 10 mejores estudiantes
  steps:
  - intent: estudiantes_mejores_calificaciones
  - action: action_get_top10_mejores_estudiantes

- story: consulta alumnos riesgo academico
  steps:
  - intent: estudiantes_calificaciones_bajas
  - action: action_get_alumnos_riesgo_academico

- story: consulta ranking grupos reprobacion
  steps:
  - intent: indice_reprobacion_grupo
  - action: action_get_ranking_grupos_reprobacion

- story: consulta estudiantes por grupo
  steps:
  - intent: lista_grupos
    entities:
    - grupo: "IDGS08"
  - action: action_get_estudiantes_por_grupo

- story: consulta promedios por cuatrimestre
  steps:
  - intent: mejores_promedios_carrera
  - action: action_get_promedios_por_cuatrimestre

- story: consulta historial academico
  steps:
  - intent: datos_estudiante_especifico
    entities:
    - nombre_estudiante: "Juan Pérez"
  - action: action_get_historial_academico

- story: happy path
  steps:
  - intent: greet
  - action: utter_greet
  - intent: indice_reprobacion_general
  - action: action_get_indice_reprobacion_general
  - intent: goodbye
  - action: utter_goodbye

- story: sad path
  steps:
  - intent: greet
  - action: utter_greet
  - intent: datos_estudiante_especifico
  - action: utter_ask_estudiante
  - intent: datos_estudiante_especifico
    entities:
    - nombre_estudiante: "María López"
  - action: action_get_datos_estudiante


rules:

- rule: Say goodbye anytime the user says goodbye
  steps:
  - intent: goodbye
  - action: utter_goodbye

- rule: Say 'I am a bot' anytime the user challenges
  steps:
  - intent: bot_challenge
  - action: utter_iamabot

- rule: Ask for student name when missing
  condition:
  - active_loop: null
  steps:
  - intent: datos_estudiante_especifico
  - action: utter_ask_estudiante

- rule: Ask for student name for grades when missing
  condition:
  - active_loop: null
  steps:
  - intent: calificaciones_estudiante
  - action: utter_ask_estudiante

- rule: Ask for career when missing for specific queries
  condition:
  - active_loop: null
  steps:
  - intent: indice_reprobacion_carrera
    entities: []
  - action: utter_ask_carrera

- rule: Ask for group when missing for specific queries
  condition:
  - active_loop: null
  steps:
  - intent: indice_reprobacion_grupo
    entities: []
  - action: utter_ask_grupo